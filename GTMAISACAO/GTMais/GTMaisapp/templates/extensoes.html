{% extends "menu.html" %}
{% load static %}
{% load livereload_tags %}
{% livereload_script %}
{% load icons %}

{% block content %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Ações de Extensão</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/icones@1.0.0/dist/icones.min.css">
    <script src="https://cdn.jsdelivr.net/npm/icones@1.0.0/dist/icones.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<style>
  
    input{
        width: 90%;
        font-size: 20px;
        border-radius: 8px;
        padding: 5px;
    }
    select{
        align-items:center;
      width: 150px;
    font-size: 15px;
    background-color: #E7E7E7;
    padding: 3px;
    border-radius: 6px;
    text-align:center;
    }
    .selects{
        display:flex;
        align-items: center;
        justify-content: center;
    }
    button{
        background-color:#1F2B5B;
        color:white;
        border-radius: 8px;
        padding: 10px;
        font-size: 18px;
    }
    form{    
        background-color:white;
        display: inline-block;
        text-align: center;
        width:80%;
        box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3);
    }
   


</style>
<body>
   
    <div style="   margin: 0 auto;
        display: grid;
        place-items: center;">
        <h1>Portifólio de Ações de Extensão</h1>
    <form method="get" action="{% url 'extensoes' %}">
        <div >
            <input type="text" name="search" placeholder="Pesquisar" value="{{ search_term }}">
        </div>
        <div class="selects">
        <div>
            <select  name="situacao" id="situacao">
                {% for situacao in situacoes %}
                <option value="{{ situacao.idSituacao }}" {% if situacao.idSituacao|stringformat:"s" == search_situacao %}selected{% endif %}>
                    {{ situacao.nomeSituacao }}
                </option>
                {% endfor %}
        </select>
    </div>
    <div>
        <select name="localizacao" id="localizacao">
            <option value="">Nacional</option>
            <option value="sala">Sala</option>
        </select>
        </div>
        <!--   <div>
            <label for="localizacao">Filtrar por Localização:</label>
            <select name="localizacao" id="localizacao">
                <option value="">Localização</option>
                <option value="Nacional" {% if search_localizacao == 'Nacional' %}selected{% endif %}>Nacional</option>
                <option value="Sala" {% if search_localizacao == 'Sala' %}selected{% endif %}>Sala</option>
            </select>
        </div>--> 


        <div>
          
            <select name="order_by">
                <option value="idAcao" {% if order_by == 'idAcao' %}selected{% endif %}>ID</option>
                <option value="TituloAcao" {% if order_by == 'TituloAcao' %}selected{% endif %}>Título</option>
                <option value="coordenadorAcao" {% if order_by == 'coordenadorAcao' %}selected{% endif %}>Coordenador</option>
                <option value="localizacao" {% if order_by == 'localizacao' %}selected{% endif %}>Localização</option>
                <option value="dtCriacao" {% if order_by == 'dtCriacao' %}selected{% endif %}>Data de Criação</option>
            </select>

            <select name="order_direction" id="order_direction">
                <option value="asc" {% if order_direction == 'asc' %}selected{% endif %}><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm14 226c0 7.7-6.3 14-14 14h-96c-7.7 0-14-6.3-14-14s6.3-14 14-14h82V128c0-7.7 6.3-14 14-14s14 6.3 14 14v146z" fill="currentColor"></path></svg>Recentes</option>
                <option value="desc" {% if order_direction == 'desc' %}selected{% endif %}>Antigos</option>
            </select>
        </div>
    </div>
    <div class="selects">
    <div>
        <select name="tipo" id="tipo">
            <option value="">Tipo</option>
            {% for tipo in tipos %}
            <option value="{{ tipo.idTipo }}" {% if tipo.idTipo|stringformat:"s" == search_tipo %}selected{% endif %}>
                {{ tipo.nomeTipo }}
            </option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <input type="date" name="data_inicio" placeholder="Data Início" value="{{ data_inicio }}">
        <input type="date" name="data_fim" placeholder="Data Fim" value="{{ data_fim }}">
    </div>   </div>
        <button type="submit">Aplicar Filtros</button>
    </form>
    
    <!-- Tabela de resultados -->
    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Título</th>
                <th>Coordenador</th>
                <th>Aluno</th>
                <th>Tipo</th>
                <th>Situação</th>
                <th>Data de Criação</th>
                <th>Data de Modificação</th>
                <th>Data de Início</th>
                <th>Data de Fim</th>
                <th>Localização</th>
            </tr>
        </thead>
        <tbody>
            {% for acao in acoes %}
            <tr>
                <td>{{ acao.idAcao }}</td>
                <td>{{ acao.TituloAcao }}</td>
                <td>{{ acao.coordenadorAcao }}</td>
                <td>{{ acao.alunoAcao }}</td>
                <td>{{ acao.idTipo.nomeTipo }}</td>
                <td>{{ acao.idSituacao.nomeSituacao }}</td>
                <td>{{ acao.dtCriacao }}</td>
                <td>{{ acao.dtModificacao }}</td>
                <td>{{ acao.dtInicio }}</td>
                <td>{{ acao.dtFim }}</td>
                <td>{{ acao.localizacao }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="11">Nenhuma ação encontrada.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</body>
</html>

{% endblock %}
